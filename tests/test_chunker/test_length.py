from pprint import pp

from core.chunker.length import LengthChunker

TEST_STR = """
保尔·柯察金：钢铁意志的写照。
保尔·柯察金是苏联作家尼古拉·奥斯特洛夫斯基半自传体小说《钢铁是怎样炼成的》中的主人公，他的一生成为跨越时代的精神偶像，其坚韧不拔的意志和为理想献身的精神激励了无数人。
他的故事，是一部关于个人在时代洪流中，历经磨难、百炼成钢的英雄史诗。
苦难童年与革命启蒙。保尔·柯察金的早年生活充满了艰辛与屈辱。他出生在乌克兰一个贫困的铁路工人家里，年幼丧父，家境的窘迫让他过早地体会到了社会底层的心酸。因不满神父的虚伪和压迫，他在学校里反抗，结果被开除，从此走上了独立谋生的道路。在社会的最底层，他当过食堂杂役，在发电厂做过工，受尽了资本家的剥削和凌辱。
十月革命的炮火彻底改变了保尔的人生轨迹。红军的到来，为他黑暗的生活带来了一缕阳光。老布尔什维克朱赫来的出现，更是为他点亮了革命的灯塔。朱赫来向他讲述了革命的道理，让他懂得了人生的价值和奋斗的意义。在朱赫来的引导下，保尔的思想迅速成长，从一个自发的反抗者，转变为一名自觉的革命战士。
战火中的淬炼与考验。为了保卫新生的苏维埃政权，保尔毅然加入了红军。在残酷的国内战争中，他冲锋陷阵，英勇杀敌，经历了血与火的洗礼。他当过侦察兵，也当过骑兵，在战斗中多次负伤，但始终保持着昂扬的斗志。战争不仅磨练了他的意志，也让他深刻地认识到革命的艰巨与伟大。
在此期间，他也经历了个人情感的波折。他与林务官的女儿冬妮娅曾有过一段纯真的恋情。然而，随着革命的深入，两人在思想上的差距日益显现，最终分道扬镳。这段经历让他明白，真正的爱情必须建立在共同的理想和信念之上。
和平建设中的奉献与牺牲。战争结束后，保尔并没有停下战斗的脚步。他把满腔的热情投入到恢复国民经济的和平建设中。特别是在修建铁路的艰苦工程中，他和同志们在天寒地冻、物资匮乏的恶劣条件下，凭借着惊人的毅力，顽强地完成了任务。
然而，战争时期留下的多处重伤和长期超负荷的工作，严重摧残了保尔的健康。他不幸患上了伤寒，后来又因旧伤复发而全身瘫痪，最终双目失明。命运的残酷打击，将这位充满活力的年轻人禁锢在了病榻之上。
钢铁意志的最后升华。面对常人无法想象的磨难，保尔·柯察金并未被击垮。当他无法再用身体为革命事业贡献力量时，他选择了用笔作为新的武器。在完全失明、全身瘫痪的情况下，他以惊人的毅力，口述完成了小说《暴风雨所诞生的》。
他用自己的亲身经历，诠释了那段流传后世的名言：“人最宝贵的是生命。生命每个人只有一次。人的一生应当这样度过：当他回首往事的时候，他不会因为虚度年华而悔恨，也不会因为碌碌无为而羞耻；在临死的时候，他能够说：‘我的整个生命和全部精力，都已经献给了世界上最壮丽的事业——为人类的解放而斗争。’”
保尔·柯察金的一生，正是这句名言最生动的写照。他将自己有限的生命，完全奉献给了他所坚信的伟大事业，他的精神，如同经过千锤百炼的钢铁，坚不可摧，熠熠生辉。
"""


def test_langchuner():
    chunker = LengthChunker()
    result: list[str] | list[list[str]] = chunker.chunk(TEST_STR)

    pp("-" * 20 + "chuner result:" + "-" * 20)
    pp(result)
    pp("-" * 20 + "chuner  finish" + "-" * 20)

    assert result is not None
