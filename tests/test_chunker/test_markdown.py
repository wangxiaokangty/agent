from pprint import pp

from core.chunker.markdown import MarkdownChunker

TEST_MARKDOWN = """
# 人工智能发展史

人工智能（Artificial Intelligence，AI）是计算机科学的一个重要分支，旨在创造能够模拟人类智能行为的机器。
从概念提出到今天的蓬勃发展，人工智能经历了多个重要的发展阶段。
## 早期探索阶段（1940s-1960s）

### 图灵测试的提出

1950年，英国数学家阿兰·图灵在论文《计算机械与智能》中提出了著名的图灵测试。
这个测试成为了判断机器是否具有智能的重要标准。图灵预言，到2000年将会有机器能够通过图灵测试。

### 达特茅斯会议

1956年夏天，在美国达特茅斯学院举办的研讨会被认为是人工智能学科的诞生标志。
约翰·麦卡锡首次提出了"人工智能"这一术语，参会者包括马文·明斯基、克劳德·香农等著名学者。

## 第一次AI春天（1960s-1970s）

这一时期，研究者们对人工智能的前景极其乐观。
他们开发了各种专家系统和推理程序，如逻辑理论家（Logic Theorist）和通用问题求解器（GPS）。

### 专家系统的发展

专家系统是这一时期的重要成果，它们能够在特定领域内模拟人类专家的决策过程。
DENDRAL和MYCIN是这一时期最成功的专家系统代表。

## 第一次AI寒冬（1970s-1980s）

### 资金削减与期望落空

由于早期承诺的过于乐观，当实际成果无法达到预期时，政府和私人投资者开始削减对AI研究的资助。
英国的莱特希尔报告对AI研究提出了严厉批评。

### 计算能力限制

当时的计算机硬件性能有限，无法支持复杂的AI算法运行，这也是导致第一次AI寒冬的重要因素。

## 第二次AI春天（1980s-1990s）

### 机器学习的兴起

这一时期，机器学习开始崭露头角。反向传播算法的发明为神经网络的发展奠定了基础。
决策树、支持向量机等算法也在这一时期得到发展。

### 商业化应用

AI技术开始走向商业化，专家系统在医疗诊断、金融分析等领域得到广泛应用。

## 现代AI时代（2000s至今）

### 大数据与计算能力提升

互联网的普及带来了海量数据，同时计算机性能的大幅提升为AI算法提供了强大的计算支持。

### 深度学习革命

2006年，杰弗里·辛顿提出深度学习概念，标志着AI进入新的发展阶段。2012年，AlexNet在ImageNet比赛中的出色表现点燃了深度学习热潮。

### 突破性应用

- **计算机视觉**：图像识别、人脸识别技术已达到人类水平
- **自然语言处理**：GPT、BERT等大型语言模型展现出强大能力
- **游戏AI**：AlphaGo击败围棋世界冠军，AlphaStar在星际争霸中胜过职业选手

## 未来展望

人工智能正朝着通用人工智能（AGI）的方向发展。量子计算、神经形态芯片等新技术将进一步推动AI的发展。同时，AI伦理、安全性等问题也日益受到关注。

### 挑战与机遇

未来的AI发展既面临技术挑战，也蕴含巨大机遇。如何确保AI技术的安全、公平、可解释性，将是人类需要共同面对的重要课题。
"""


def test_markdown_chunker():
    chunker = MarkdownChunker()
    result: list[str] | list[list[str]] = chunker.chunk(TEST_MARKDOWN)
    meta: list[str] | list[list[str]] = chunker.meta(TEST_MARKDOWN)

    pp("-" * 20 + "markdown chunker result:" + "-" * 20)
    for i in range(len(result)):
        pp(meta[i])
        pp(result[i])
    pp("-" * 20 + "markdown chunker finish" + "-" * 20)

    assert result is not None
    assert isinstance(result, list)
    assert len(result) > 1
